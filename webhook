-- B·∫≠t d·ªãch v·ª• HTTP Service
local HttpService = game:GetService("HttpService")

-- URL webhook c·ªßa Discord (thay th·∫ø b·∫±ng webhook c·ªßa b·∫°n)
local webhookURL = "https://discord.com/api/webhooks/1333077032640315392/lpi9fF77qHvTx0p3brjyQ5rTcWkDJqYugN1wZrXIx9C73vVKopqulvMUxuMYAa6pTvL_"

-- H√†m g·ª≠i d·ªØ li·ªáu t·ªõi Discord qua Webhook
local function sendToDiscord(playerCount, jobId, scriptData)
    -- C·∫•u tr√∫c d·ªØ li·ªáu g·ª≠i ƒëi
    local data = {
        ["content"] = "",
        ["embeds"] = {
            {
                ["title"] = "üåï Full Moon Notify üåï",
                ["description"] = "",
                ["color"] = 5814783,
                ["fields"] = {
                    {
                        ["name"] = "[ Players ]",
                        ["value"] = tostring(playerCount),
                        ["inline"] = true
                    },
                    {
                        ["name"] = "üìÅ Job-Id",
                        ["value"] = '```'.. tostring(game.JobId) ..'```',
                        ["inline"] = false
                    },
                    {
                        ["name"] = "‚öîÔ∏è Script",
                        ["value"] = '```lua\n' .. scriptData .. '\n```',
                        ["inline"] = false
                    }
                },
                ["footer"] = {
                    ["text"] = "@ducdesign v1.0.0 üî• <> " .. os.date("%x %X")
                }
            }
        }
    }

    -- Encode d·ªØ li·ªáu th√†nh JSON ƒë·ªÉ g·ª≠i ƒëi
    local jsonData = HttpService:JSONEncode(data)

    -- G·ª≠i y√™u c·∫ßu POST t·ªõi webhook Discord
    HttpService:PostAsync(webhookURL, jsonData, Enum.HttpContentType.ApplicationJson)
end

-- H√†m ƒë·ªÉ l·∫•y d·ªØ li·ªáu trong game (v√≠ d·ª•: s·ªë ng∆∞·ªùi ch∆°i)
local function getDataAndSend()
    local players = game:GetService("Players")
    local playerCount = #players:GetPlayers()  -- S·ªë l∆∞·ª£ng ng∆∞·ªùi ch∆°i trong server

    -- Gi·∫£ s·ª≠ Job-Id l√† m·ªôt gi√° tr·ªã ng·∫´u nhi√™n (b·∫°n c√≥ th·ªÉ thay ƒë·ªïi theo y√™u c·∫ßu)
    local jobId = game.JobId or "Unknown"

    -- Script (gi·∫£ s·ª≠ l√† m·ªôt h√†nh ƒë·ªông c·ª• th·ªÉ)
    local scriptData = 'game:GetService("ReplicatedStorage").__ServerBrowser:InvokeServer("teleport","' .. jobId .. '")'

    -- G·ª≠i d·ªØ li·ªáu ƒë·∫øn Discord
    sendToDiscord(playerCount, jobId, scriptData)
end

-- G·ªçi h√†m l·∫•y d·ªØ li·ªáu v√† g·ª≠i ƒëi (c√≥ th·ªÉ ch·∫°y khi b·∫°n join server ho·∫∑c sau m·ªôt s·ª± ki·ªán nh·∫•t ƒë·ªãnh)
getDataAndSend()

-- L·∫∑p l·∫°i vi·ªác g·ª≠i m·ªói v√†i ph√∫t (tu·ª≥ ch·ªçn)
while wait(300) do  -- 300 gi√¢y (5 ph√∫t)
    getDataAndSend()
end
